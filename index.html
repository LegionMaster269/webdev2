<!DOCTYPE html>
<html>
<head>
  <title>Face Detection with tracking.js</title>
</head>
<body>
  <video id="video" width="640" height="480" autoplay></video>
  <canvas id="canvas" width="640" height="480"></canvas>
  
  <script src="tracking.js"></script>
  
  <script>
    // Wait for the tracking.js library to load
    window.addEventListener('load', () => {
      // Get video element and canvas
      const video = document.getElementById('video');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');

      // Initialize the tracker
      const tracker = new tracking.ObjectTracker('face');

      // Attach the video stream to the video element
      navigator.mediaDevices.getUserMedia({ video: true })
        .then((stream) => {
          video.srcObject = stream;
        })
        .catch((error) => {
          console.error('Error accessing the webcam:', error);
        });

      // Start tracking when the video is loaded
      video.addEventListener('canplay', () => {
        video.play();
        tracker.setInitialScale(4);
        tracker.setStepSize(2);
        tracker.setEdgesDensity(0.1);
        tracking.track('#video', tracker);

        tracker.on('track', (event) => {
          context.clearRect(0, 0, canvas.width, canvas.height);

          event.data.forEach((rect) => {
            context.strokeStyle = '#FF0000';
            context.strokeRect(rect.x, rect.y, rect.width, rect.height);
          });
        });
      });
    });
  </script>
</body>
</html>
